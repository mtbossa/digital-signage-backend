"use strict";(self.webpackChunkparoquia_pio_x_frontend=self.webpackChunkparoquia_pio_x_frontend||[]).push([[132],{730:(O,h,i)=>{i.d(h,{P:()=>v});var E=i(1135),r=i(5698),p=i(2340),u=i(4650),C=i(529);let v=(()=>{class c{constructor(s){this.http=s,this.posts$=new E.X(null)}fetchIndex(s,d,P,f){return this.http.get(`${p.N.apiUrl}/api/posts`,{params:{page:P,size:f}}).pipe((0,r.q)(1))}create(s){return this.http.post(`${p.N.apiUrl}/api/posts`,s).pipe((0,r.q)(1))}show(s,d=!1){return this.http.get(`${p.N.apiUrl}/api/posts/${s}`,{params:{withDisplaysIds:d}}).pipe((0,r.q)(1))}update(s,d){return this.http.patch(`${p.N.apiUrl}/api/posts/${s}`,d).pipe((0,r.q)(1))}updateDescription(s,d){return this.http.patch(`${p.N.apiUrl}/api/posts/${s}/description`,d).pipe((0,r.q)(1))}getPosts(){return this.posts$.asObservable()}remove(s){return this.http.delete(`${p.N.apiUrl}/api/posts/${s}`).pipe((0,r.q)(1))}}return c.\u0275fac=function(s){return new(s||c)(u.\u0275\u0275inject(C.eN))},c.\u0275prov=u.\u0275\u0275defineInjectable({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},4132:(O,h,i)=>{i.r(h),i.d(h,{PostListComponent:()=>G});var E=i(6895),r=i(1253),p=i(6098),u=i(4335),C=i(22),v=i(1150),c=i(6693),x=i(2079),s=i(1135),d=i(9841),P=i(8372),f=i(3900),T=i(8675),b=i(3099),g=i(4004),D=i(9300),t=i(4650),L=i(5197),M=i(730);function $(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"ID"),t.\u0275\u0275elementEnd())}function y(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Descri\xe7\xe3o"),t.\u0275\u0275elementEnd())}function S(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Data de in\xedcio"),t.\u0275\u0275elementEnd())}function I(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Data de fim"),t.\u0275\u0275elementEnd())}function B(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Hora de in\xedcio"),t.\u0275\u0275elementEnd())}function U(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Hora de fim"),t.\u0275\u0275elementEnd())}function R(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Tempo de exposi\xe7\xe3o"),t.\u0275\u0275elementEnd())}function W(e,o){1&e&&t.\u0275\u0275element(0,"th",13),2&e&&t.\u0275\u0275property("sorter",null)}function K(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.id," ")}}function A(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.description," ")}}function j(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.start_date," ")}}function z(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.end_date," ")}}function V(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.start_time," ")}}function H(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.end_time," ")}}function w(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.expose_time," ")}}function N(e,o){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",16)(1,"button",17),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext().$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.edit(_.id))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"button",18),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext().$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.remove(_.id))}),t.\u0275\u0275elementEnd()()}}function F(e,o){1&e&&(t.\u0275\u0275elementStart(0,"tr",14),t.\u0275\u0275template(1,K,2,1,"td",15),t.\u0275\u0275template(2,A,2,1,"td",15),t.\u0275\u0275template(3,j,2,1,"td",15),t.\u0275\u0275template(4,z,2,1,"td",15),t.\u0275\u0275template(5,V,2,1,"td",15),t.\u0275\u0275template(6,H,2,1,"td",15),t.\u0275\u0275template(7,w,2,1,"td",15),t.\u0275\u0275template(8,N,3,0,"td",15),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","id"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","description"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","start_date"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","end_date"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","start_time"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","end_time"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","expose_time"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","actions"))}const X=function(){return[10,25,50,100]};function J(e,o){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"table",4),t.\u0275\u0275listener("tuiSortByChange",function(_){t.\u0275\u0275restoreView(n);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.sorter$.next(_))})("directionChange",function(_){t.\u0275\u0275restoreView(n);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.direction$.next(_))}),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementStart(3,"thead")(4,"tr",5),t.\u0275\u0275template(5,$,2,0,"th",6),t.\u0275\u0275template(6,y,2,0,"th",6),t.\u0275\u0275template(7,S,2,0,"th",6),t.\u0275\u0275template(8,I,2,0,"th",6),t.\u0275\u0275template(9,B,2,0,"th",6),t.\u0275\u0275template(10,U,2,0,"th",6),t.\u0275\u0275template(11,R,2,0,"th",6),t.\u0275\u0275template(12,W,1,1,"th",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"tbody",8),t.\u0275\u0275template(14,F,9,8,"tr",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(15,"tfoot")(16,"tr")(17,"td",10)(18,"tui-table-pagination",11),t.\u0275\u0275listener("pageChange",function(_){t.\u0275\u0275restoreView(n);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.changePage(_))})("sizeChange",function(_){t.\u0275\u0275restoreView(n);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.changeSize(_))}),t.\u0275\u0275pipe(19,"async"),t.\u0275\u0275elementEnd()()()()()}if(2&e){const n=o.tuiLet,a=t.\u0275\u0275nextContext();t.\u0275\u0275property("columns",a.columns)("direction",t.\u0275\u0275pipeBind1(1,16,a.direction$)||1)("tuiSortBy",t.\u0275\u0275pipeBind1(2,18,a.sorter$)),t.\u0275\u0275advance(5),t.\u0275\u0275property("tuiHead","id"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","description"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","start_date"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","end_date"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","start_time"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","end_time"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","expose_time"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","actions"),t.\u0275\u0275advance(1),t.\u0275\u0275property("data",n),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiRowOf",n),t.\u0275\u0275advance(3),t.\u0275\u0275property("colSpan",a.columns.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("items",t.\u0275\u0275pureFunction0(22,X))("total",t.\u0275\u0275pipeBind1(19,20,a.total$)||0)}}let G=(()=>{class e{constructor(n,a,_,l,Q){this.alertService=n,this.cdr=a,this.router=_,this.activatedRoute=l,this.postsService=Q,this.columns=["id","description","start_date","end_date","start_time","end_time","expose_time","actions"],this.posts=[],this.page$=new s.X(1),this.size$=new s.X(10),this.refresh$=new s.X(!1),this.direction$=new s.X(-1),this.sorter$=new s.X("id"),this.search="",this.request$=(0,d.a)([this.sorter$,this.direction$,this.page$,this.size$,this.refresh$]).pipe((0,P.b)(0),(0,f.w)(([m,Y,Z,k])=>this.postsService.fetchIndex(m,Y,Z,k).pipe((0,T.O)(null))),(0,b.B)()),this.loading$=this.request$.pipe((0,g.U)(m=>!m)),this.total$=this.request$.pipe((0,D.h)(u.Pc),(0,g.U)(({total:m})=>m),(0,T.O)(1)),this.data$=this.request$.pipe((0,D.h)(u.Pc),(0,g.U)(m=>m.data.filter(u.Pc)),(0,T.O)([])),this.subscriptions=[]}ngOnInit(){const n=this.data$.subscribe(a=>this.posts=a);this.subscriptions=[n,...this.subscriptions]}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}changePage(n){this.page$.next(n+1)}changeSize(n){this.size$.next(n)}refresh(){this.refresh$.next(!0)}goTo(n){this.router.navigate([n],{relativeTo:this.activatedRoute})}test(n){return console.log(n),n.id}remove(n){this.postsService.remove(n).subscribe({next:()=>{this.posts=this.posts.filter(a=>a.id!==n),this.alertService.open("Post removido com sucesso!",{status:"success"}).subscribe(),this.cdr.markForCheck()}})}edit(n){this.router.navigate([n,"editar"],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275directiveInject(v.J9),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(L.F0),t.\u0275\u0275directiveInject(L.gz),t.\u0275\u0275directiveInject(M.P))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["app-post-list"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:10,vars:5,consts:[[1,"buttons-header","tui-space_vertical-8"],["tuiButton","","icon","tuiIconPlus","size","m",3,"click"],[3,"overlay","showLoader"],["class","table","tuiTable","",3,"columns","direction","tuiSortBy","tuiSortByChange","directionChange",4,"tuiLet"],["tuiTable","",1,"table",3,"columns","direction","tuiSortBy","tuiSortByChange","directionChange"],["tuiThGroup",""],["tuiTh","","tuiSortable","",4,"tuiHead"],["tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],[3,"colSpan"],[1,"tui-space_top-2",3,"items","total","pageChange","sizeChange"],["tuiTh","","tuiSortable",""],["tuiTh","",3,"sorter"],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconDraft","title","Editar","shape","rounded",1,"edit",3,"click"],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconTrash","title","Remove","shape","rounded",1,"remove",3,"click"]],template:function(n,a){1&n&&(t.\u0275\u0275elementStart(0,"div")(1,"h1"),t.\u0275\u0275text(2,"Posts"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",0)(4,"button",1),t.\u0275\u0275listener("click",function(){return a.goTo("criar")}),t.\u0275\u0275text(5,"Criar"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div")(7,"tui-loader",2),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275template(9,J,20,23,"table",3),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275advance(7),t.\u0275\u0275property("overlay",!0)("showLoader",!!t.\u0275\u0275pipeBind1(8,3,a.loading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("tuiLet",a.posts))},dependencies:[E.ez,E.Ov,c.fN,c.v0,r.jz,r.c4,r.jY,r.EE,r.Ws,r.Kt,r.fu,r.Bl,r.DZ,r.LU,r.PQ,r.gJ,C.WD,C.Ls,p.y3,p.WT,x.dS,x.kM],styles:[".buttons-header[_ngcontent-%COMP%]{padding-block:1.5rem;padding-inline:2rem;border-radius:.5rem;border:1px solid var(--tui-base-03);background-color:var(--tui-base-02)}.table[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e})()}}]);