"use strict";(self.webpackChunkparoquia_pio_x_frontend=self.webpackChunkparoquia_pio_x_frontend||[]).push([[514],{3514:(Y,u,i)=>{i.r(u),i.d(u,{InvitationListComponent:()=>X});var v=i(6895),s=i(1253),h=i(6098),d=i(4335),C=i(22),I=i(1150),x=i(6693),E=i(2079),c=i(1135),T=i(9841),L=i(8372),b=i(3900),p=i(8675),O=i(3099),m=i(4004),f=i(9300),t=i(4650),g=i(5197),P=i(6719);function D(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Email"),t.\u0275\u0275elementEnd())}function y(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Quem convidou"),t.\u0275\u0275elementEnd())}function S(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Adminitrador"),t.\u0275\u0275elementEnd())}function M(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Convidado em"),t.\u0275\u0275elementEnd())}function B(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Registrado em"),t.\u0275\u0275elementEnd())}function $(e,o){1&e&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Loja"),t.\u0275\u0275elementEnd())}function R(e,o){1&e&&t.\u0275\u0275element(0,"th",13),2&e&&t.\u0275\u0275property("sorter",null)}function U(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.email," ")}}function W(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.inviter," ")}}function A(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.is_admin," ")}}function K(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.created_at," ")}}function j(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.registered_at," ")}}function z(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.store_id," ")}}function V(e,o){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",16)(1,"button",17),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const r=t.\u0275\u0275nextContext().$implicit,_=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(_.edit(r.id))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"button",18),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const r=t.\u0275\u0275nextContext().$implicit,_=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(_.remove(r.id))}),t.\u0275\u0275elementEnd()()}}function w(e,o){1&e&&(t.\u0275\u0275elementStart(0,"tr",14),t.\u0275\u0275template(1,U,2,1,"td",15),t.\u0275\u0275template(2,W,2,1,"td",15),t.\u0275\u0275template(3,A,2,1,"td",15),t.\u0275\u0275template(4,K,2,1,"td",15),t.\u0275\u0275template(5,j,2,1,"td",15),t.\u0275\u0275template(6,z,2,1,"td",15),t.\u0275\u0275template(7,V,3,0,"td",15),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","email"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","inviter"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","is_admin"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","created_at"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","registered_at"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","store_id"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","actions"))}const H=function(){return[10,25,50,100]};function F(e,o){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"table",4),t.\u0275\u0275listener("tuiSortByChange",function(r){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.sorter$.next(r))})("directionChange",function(r){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.direction$.next(r))}),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementStart(3,"thead")(4,"tr",5),t.\u0275\u0275template(5,D,2,0,"th",6),t.\u0275\u0275template(6,y,2,0,"th",6),t.\u0275\u0275template(7,S,2,0,"th",6),t.\u0275\u0275template(8,M,2,0,"th",6),t.\u0275\u0275template(9,B,2,0,"th",6),t.\u0275\u0275template(10,$,2,0,"th",6),t.\u0275\u0275template(11,R,1,1,"th",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(12,"tbody",8),t.\u0275\u0275template(13,w,8,7,"tr",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"tfoot")(15,"tr")(16,"td",10)(17,"tui-table-pagination",11),t.\u0275\u0275listener("pageChange",function(r){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.changePage(r))})("sizeChange",function(r){t.\u0275\u0275restoreView(n);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.changeSize(r))}),t.\u0275\u0275pipe(18,"async"),t.\u0275\u0275elementEnd()()()()()}if(2&e){const n=o.tuiLet,a=t.\u0275\u0275nextContext();t.\u0275\u0275property("columns",a.columns)("direction",t.\u0275\u0275pipeBind1(1,15,a.direction$)||1)("tuiSortBy",t.\u0275\u0275pipeBind1(2,17,a.sorter$)),t.\u0275\u0275advance(5),t.\u0275\u0275property("tuiHead","email"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","inviter"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","is_admin"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","created_at"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","registered_at"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","store_id"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","actions"),t.\u0275\u0275advance(1),t.\u0275\u0275property("data",n),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiRowOf",n),t.\u0275\u0275advance(3),t.\u0275\u0275property("colSpan",a.columns.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("items",t.\u0275\u0275pureFunction0(21,H))("total",t.\u0275\u0275pipeBind1(18,19,a.total$)||0)}}let X=(()=>{class e{constructor(n,a,r,_,J){this.alertService=n,this.cdr=a,this.router=r,this.activatedRoute=_,this.invitationsService=J,this.columns=["email","inviter","is_admin","created_at","registered_at","store_id","actions"],this.invitations=[],this.page$=new c.X(1),this.size$=new c.X(10),this.refresh$=new c.X(!1),this.direction$=new c.X(-1),this.sorter$=new c.X("email"),this.search="",this.request$=(0,T.a)([this.sorter$,this.direction$,this.page$,this.size$,this.refresh$]).pipe((0,L.b)(0),(0,b.w)(([l,Q,G,N])=>this.invitationsService.fetchIndex(l,Q,G,N).pipe((0,p.O)(null))),(0,O.B)()),this.loading$=this.request$.pipe((0,m.U)(l=>!l)),this.total$=this.request$.pipe((0,f.h)(d.Pc),(0,m.U)(({total:l})=>l),(0,p.O)(1)),this.data$=this.request$.pipe((0,f.h)(d.Pc),(0,m.U)(l=>l.data.filter(d.Pc)),(0,p.O)([])),this.subscriptions=[]}ngOnInit(){const n=this.data$.subscribe(a=>this.invitations=a);this.subscriptions=[n,...this.subscriptions]}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}changePage(n){this.page$.next(n+1)}changeSize(n){this.size$.next(n)}refresh(){this.refresh$.next(!0)}goTo(n){this.router.navigate([n],{relativeTo:this.activatedRoute})}remove(n){this.invitationsService.remove(n).subscribe({next:()=>{this.invitations=this.invitations.filter(a=>a.id!==n),this.alertService.open("Convite removido com sucesso!",{status:"success"}).subscribe(),this.cdr.markForCheck()}})}edit(n){this.router.navigate([n,"editar"],{relativeTo:this.activatedRoute})}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275directiveInject(I.J9),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(g.F0),t.\u0275\u0275directiveInject(g.gz),t.\u0275\u0275directiveInject(P.h))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["app-invitation-list"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:10,vars:5,consts:[[1,"buttons-header","tui-space_vertical-8"],["tuiButton","","icon","tuiIconPlus","size","m",3,"click"],[3,"overlay","showLoader"],["class","table","tuiTable","",3,"columns","direction","tuiSortBy","tuiSortByChange","directionChange",4,"tuiLet"],["tuiTable","",1,"table",3,"columns","direction","tuiSortBy","tuiSortByChange","directionChange"],["tuiThGroup",""],["tuiTh","","tuiSortable","",4,"tuiHead"],["tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],[3,"colSpan"],[1,"tui-space_top-2",3,"items","total","pageChange","sizeChange"],["tuiTh","","tuiSortable",""],["tuiTh","",3,"sorter"],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconDraft","title","Editar","shape","rounded",1,"edit",3,"click"],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconTrash","title","Remove","shape","rounded",1,"remove",3,"click"]],template:function(n,a){1&n&&(t.\u0275\u0275elementStart(0,"div")(1,"h1"),t.\u0275\u0275text(2,"Convites"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",0)(4,"button",1),t.\u0275\u0275listener("click",function(){return a.goTo("criar")}),t.\u0275\u0275text(5,"Criar"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div")(7,"tui-loader",2),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275template(9,F,19,22,"table",3),t.\u0275\u0275elementEnd()()()),2&n&&(t.\u0275\u0275advance(7),t.\u0275\u0275property("overlay",!0)("showLoader",!!t.\u0275\u0275pipeBind1(8,3,a.loading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("tuiLet",a.invitations))},dependencies:[v.ez,v.Ov,x.fN,x.v0,s.jz,s.c4,s.jY,s.EE,s.Ws,s.Kt,s.fu,s.Bl,s.DZ,s.LU,s.PQ,s.gJ,C.WD,C.Ls,h.y3,h.WT,E.dS,E.kM],styles:[".buttons-header[_ngcontent-%COMP%]{padding-block:1.5rem;padding-inline:2rem;border-radius:.5rem;border:1px solid var(--tui-base-03);background-color:var(--tui-base-02)}.table[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e})()}}]);