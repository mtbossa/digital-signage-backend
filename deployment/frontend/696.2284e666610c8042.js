"use strict";(self.webpackChunkparoquia_pio_x_frontend=self.webpackChunkparoquia_pio_x_frontend||[]).push([[696],{4127:(O,C,n)=>{n.d(C,{i:()=>y});var h=n(529),o=n(1135),c=n(5698),p=n(2340),E=n(4650);let y=(()=>{class d{constructor(a){this.http=a,this.displays$=new o.X(null)}fetchIndex(a,m,D,x){return this.http.get(`${p.N.apiUrl}/api/displays`,{params:{page:D,size:x}}).pipe((0,c.q)(1))}create(a){return this.http.post(`${p.N.apiUrl}/api/displays`,a).pipe((0,c.q)(1))}show(a){return this.http.get(`${p.N.apiUrl}/api/displays/${a}`).pipe((0,c.q)(1))}update(a,m){return this.http.patch(`${p.N.apiUrl}/api/displays/${a}`,m).pipe((0,c.q)(1))}getDisplays(){return this.displays$.asObservable()}remove(a){return this.http.delete(`${p.N.apiUrl}/api/displays/${a}`).pipe((0,c.q)(1))}getDisplayOptions(a){const m=new h.LE({fromObject:{...a?.whereDoesntHaveRaspberry&&{whereDoesntHaveRaspberry:a?.whereDoesntHaveRaspberry},...a?.withIds&&{withIds:JSON.stringify(a?.withIds)}}});return this.http.get(`${p.N.apiUrl}/api/displays/options`,{params:m}).pipe((0,c.q)(1))}}return d.\u0275fac=function(a){return new(a||d)(E.\u0275\u0275inject(h.eN))},d.\u0275prov=E.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},696:(O,C,n)=>{n.r(C),n.d(C,{DisplayListComponent:()=>N});var h=n(6895),o=n(1253),c=n(6098),p=n(4335),E=n(22),y=n(1150),d=n(6693),v=n(2079),a=n(1135),m=n(9841),D=n(8372),x=n(3900),g=n(8675),P=n(3099),f=n(4004),T=n(9300),t=n(4650),L=n(5197),b=n(4127);function M(i,r){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"ID"),t.\u0275\u0275elementEnd())}function I(i,r){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Nome"),t.\u0275\u0275elementEnd())}function $(i,r){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Largura"),t.\u0275\u0275elementEnd())}function S(i,r){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Altura"),t.\u0275\u0275elementEnd())}function B(i,r){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Polegadas"),t.\u0275\u0275elementEnd())}function R(i,r){1&i&&t.\u0275\u0275element(0,"th",13),2&i&&t.\u0275\u0275property("sorter",null)}function U(i,r){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.id," ")}}function W(i,r){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.name," ")}}function A(i,r){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.width," ")}}function K(i,r){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.height," ")}}function j(i,r){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.size," ")}}function w(i,r){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",16)(1,"button",17),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit,_=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(_.edit(l.id))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"button",18),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext().$implicit,_=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(_.remove(l.id))}),t.\u0275\u0275elementEnd()()}}function z(i,r){1&i&&(t.\u0275\u0275elementStart(0,"tr",14),t.\u0275\u0275template(1,U,2,1,"td",15),t.\u0275\u0275template(2,W,2,1,"td",15),t.\u0275\u0275template(3,A,2,1,"td",15),t.\u0275\u0275template(4,K,2,1,"td",15),t.\u0275\u0275template(5,j,2,1,"td",15),t.\u0275\u0275template(6,w,3,0,"td",15),t.\u0275\u0275elementEnd()),2&i&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","id"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","name"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","width"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","height"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","size"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","actions"))}const V=function(){return[10,25,50,100]};function H(i,r){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"table",4),t.\u0275\u0275listener("tuiSortByChange",function(l){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.sorter$.next(l))})("directionChange",function(l){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.direction$.next(l))}),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementStart(3,"thead")(4,"tr",5),t.\u0275\u0275template(5,M,2,0,"th",6),t.\u0275\u0275template(6,I,2,0,"th",6),t.\u0275\u0275template(7,$,2,0,"th",6),t.\u0275\u0275template(8,S,2,0,"th",6),t.\u0275\u0275template(9,B,2,0,"th",6),t.\u0275\u0275template(10,R,1,1,"th",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"tbody",8),t.\u0275\u0275template(12,z,7,6,"tr",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"tfoot")(14,"tr")(15,"td",10)(16,"tui-table-pagination",11),t.\u0275\u0275listener("pageChange",function(l){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.changePage(l))})("sizeChange",function(l){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(_.changeSize(l))}),t.\u0275\u0275pipe(17,"async"),t.\u0275\u0275elementEnd()()()()()}if(2&i){const e=r.tuiLet,s=t.\u0275\u0275nextContext();t.\u0275\u0275property("columns",s.columns)("direction",t.\u0275\u0275pipeBind1(1,14,s.direction$)||1)("tuiSortBy",t.\u0275\u0275pipeBind1(2,16,s.sorter$)),t.\u0275\u0275advance(5),t.\u0275\u0275property("tuiHead","id"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","name"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","width"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","height"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","size"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","actions"),t.\u0275\u0275advance(1),t.\u0275\u0275property("data",e),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiRowOf",e),t.\u0275\u0275advance(3),t.\u0275\u0275property("colSpan",s.columns.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("items",t.\u0275\u0275pureFunction0(20,V))("total",t.\u0275\u0275pipeBind1(17,18,s.total$)||0)}}let N=(()=>{class i{constructor(e,s,l,_,F){this.alertService=e,this.cdr=s,this.router=l,this.activatedRoute=_,this.displaysService=F,this.columns=["id","name","width","height","size","actions"],this.displays=[],this.page$=new a.X(1),this.size$=new a.X(10),this.refresh$=new a.X(!1),this.direction$=new a.X(-1),this.sorter$=new a.X("id"),this.search="",this.request$=(0,m.a)([this.sorter$,this.direction$,this.page$,this.size$,this.refresh$]).pipe((0,D.b)(0),(0,x.w)(([u,X,J,G])=>this.displaysService.fetchIndex(u,X,J,G).pipe((0,g.O)(null))),(0,P.B)()),this.loading$=this.request$.pipe((0,f.U)(u=>!u)),this.total$=this.request$.pipe((0,T.h)(p.Pc),(0,f.U)(({total:u})=>u),(0,g.O)(1)),this.data$=this.request$.pipe((0,T.h)(p.Pc),(0,f.U)(u=>u.data.filter(p.Pc)),(0,g.O)([])),this.subscriptions=[]}ngOnInit(){const e=this.data$.subscribe(s=>this.displays=s);this.subscriptions=[e,...this.subscriptions]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}changePage(e){this.page$.next(e+1)}changeSize(e){this.size$.next(e)}refresh(){this.refresh$.next(!0)}goTo(e){this.router.navigate([e],{relativeTo:this.activatedRoute})}remove(e){this.displaysService.remove(e).subscribe({next:()=>{this.displays=this.displays.filter(s=>s.id!==e),this.alertService.open("Display removido com sucesso!",{status:"success"}).subscribe(),this.cdr.markForCheck()}})}edit(e){this.router.navigate([e,"editar"],{relativeTo:this.activatedRoute})}}return i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275directiveInject(y.J9),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(L.F0),t.\u0275\u0275directiveInject(L.gz),t.\u0275\u0275directiveInject(b.i))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-display-list"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:10,vars:5,consts:[[1,"buttons-header","tui-space_vertical-8"],["tuiButton","","icon","tuiIconPlus","size","m",3,"click"],[3,"overlay","showLoader"],["class","table","tuiTable","",3,"columns","direction","tuiSortBy","tuiSortByChange","directionChange",4,"tuiLet"],["tuiTable","",1,"table",3,"columns","direction","tuiSortBy","tuiSortByChange","directionChange"],["tuiThGroup",""],["tuiTh","","tuiSortable","",4,"tuiHead"],["tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],[3,"colSpan"],[1,"tui-space_top-2",3,"items","total","pageChange","sizeChange"],["tuiTh","","tuiSortable",""],["tuiTh","",3,"sorter"],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconDraft","title","Editar","shape","rounded",1,"edit",3,"click"],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconTrash","title","Remove","shape","rounded",1,"remove",3,"click"]],template:function(e,s){1&e&&(t.\u0275\u0275elementStart(0,"div")(1,"h1"),t.\u0275\u0275text(2,"Displays"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",0)(4,"button",1),t.\u0275\u0275listener("click",function(){return s.goTo("criar")}),t.\u0275\u0275text(5,"Criar"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div")(7,"tui-loader",2),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275template(9,H,18,21,"table",3),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(7),t.\u0275\u0275property("overlay",!0)("showLoader",!!t.\u0275\u0275pipeBind1(8,3,s.loading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("tuiLet",s.displays))},dependencies:[h.ez,h.Ov,d.fN,d.v0,o.jz,o.c4,o.jY,o.EE,o.Ws,o.Kt,o.fu,o.Bl,o.DZ,o.LU,o.PQ,o.gJ,E.WD,E.Ls,c.y3,c.WT,v.dS,v.kM],styles:[".buttons-header[_ngcontent-%COMP%]{padding-block:1.5rem;padding-inline:2rem;border-radius:.5rem;border:1px solid var(--tui-base-03);background-color:var(--tui-base-02)}.table[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),i})()}}]);