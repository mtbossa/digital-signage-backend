"use strict";(self.webpackChunkparoquia_pio_x_frontend=self.webpackChunkparoquia_pio_x_frontend||[]).push([[209],{7209:(K,P,n)=>{n.r(P),n.d(P,{RaspberryListComponent:()=>H});var p=n(6895),t=n(1253),b=n(6098),M=n(22),g=n(6693),T=n(2079),R=n(655),f=n(433),O=n(4335),x=n(3442),y=n(1150),h=n(5635),C=n(1135),E=n(8675),A=n(8505),L=n(1884),$=n(8372),S=n(4004),I=n(9841),F=n(3900),v=n(3099),B=n(9300),u=n(5698),e=n(4650),a=n(5197);function l(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"th",11),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const i=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("sorter",null),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(i.title)}}function _(r,o){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,l,2,2,"th",6),e.\u0275\u0275elementContainerEnd()),2&r){const i=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("tuiHead",i.key)}}function m(r,o){1&r&&e.\u0275\u0275element(0,"th",11),2&r&&e.\u0275\u0275property("sorter",null)}function U(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"td",14),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&r){const i=e.\u0275\u0275nextContext().$implicit,s=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",s[i.key]," ")}}function W(r,o){if(1&r&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,U,2,1,"td",13),e.\u0275\u0275elementContainerEnd()),2&r){const i=o.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("tuiCell",i.key)}}function V(r,o){if(1&r){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",14)(1,"button",15),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);const c=e.\u0275\u0275nextContext().$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.edit(c))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"button",16),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(i);const c=e.\u0275\u0275nextContext().$implicit,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.remove(c))}),e.\u0275\u0275elementEnd()()}}function j(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"tr",12),e.\u0275\u0275template(1,W,2,1,"ng-container",5),e.\u0275\u0275template(2,V,3,0,"td",13),e.\u0275\u0275elementEnd()),2&r){const i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",i.columns),e.\u0275\u0275advance(1),e.\u0275\u0275property("tuiCell","actions")}}const N=function(){return[10,25,50,100]};function z(r,o){if(1&r){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"table",3),e.\u0275\u0275listener("directionChange",function(c){e.\u0275\u0275restoreView(i);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.direction$.next(c))}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementStart(2,"thead")(3,"tr",4),e.\u0275\u0275template(4,_,2,1,"ng-container",5),e.\u0275\u0275template(5,m,1,1,"th",6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"tbody",7),e.\u0275\u0275template(7,j,3,2,"tr",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"tfoot")(9,"tr")(10,"td",9)(11,"tui-table-pagination",10),e.\u0275\u0275listener("pageChange",function(c){e.\u0275\u0275restoreView(i);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.changePage(c))})("sizeChange",function(c){e.\u0275\u0275restoreView(i);const d=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(d.changeSize(c))}),e.\u0275\u0275pipe(12,"async"),e.\u0275\u0275pipe(13,"async"),e.\u0275\u0275elementEnd()()()()()}if(2&r){const i=o.tuiLet,s=e.\u0275\u0275nextContext();e.\u0275\u0275property("columns",s.getColumNames(s.columns))("direction",e.\u0275\u0275pipeBind1(1,10,s.direction$)||1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",s.columns),e.\u0275\u0275advance(1),e.\u0275\u0275property("tuiHead","actions"),e.\u0275\u0275advance(1),e.\u0275\u0275property("data",i),e.\u0275\u0275advance(1),e.\u0275\u0275property("tuiRowOf",i),e.\u0275\u0275advance(3),e.\u0275\u0275property("colSpan",s.columns.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("items",e.\u0275\u0275pureFunction0(16,N))("total",e.\u0275\u0275pipeBind1(12,12,s.total$)||0)("page",e.\u0275\u0275pipeBind1(13,14,s.pagination$)||0)}}class D{constructor(o,i,s,c){this.alertService=o,this.cdr=i,this.router=s,this.activatedRoute=c,this.defaultColumns=[{key:"actions",title:""}],this.data$=new C.X([]),this.searchControl=new f.FormControl("",{nonNullable:!0}),this.search$=this.searchControl.valueChanges.pipe((0,E.O)(""),(0,A.b)(()=>this.page$.next(1)),(0,L.x)(),(0,$.b)(500)),this.page$=new C.X(1),this.pagination$=this.page$.pipe((0,S.U)(d=>d-1)),this.size$=new C.X(10),this.refresh$=new C.X(!1),this.direction$=new C.X(-1)}ngOnInit(){this.request$=(0,I.a)([this.page$,this.size$,this.search$,this.refresh$]).pipe((0,$.b)(0),(0,F.w)(([o,i,s])=>this.listableService.getPaginatedResponse(o,i,s).pipe((0,E.O)(null))),(0,A.b)(o=>this.data$.next(o?.data.filter(O.Pc)??[])),(0,v.B)()),this.loading$=this.request$.pipe((0,S.U)(o=>!o)),this.total$=this.request$.pipe((0,B.h)(O.Pc),(0,S.U)(({total:o})=>o),(0,E.O)(1)),this.columns=[...this.columns,...this.defaultColumns]}changePage(o){this.page$.next(o+1)}changeSize(o){this.size$.next(o)}refresh(){this.refresh$.next(!0)}goTo(o){this.router.navigate([o],{relativeTo:this.activatedRoute})}remove(o){const i=o[this.listableService.primaryKeyColumnName];this.listableService.remove(i).subscribe({next:()=>{this.data$.pipe((0,u.q)(1)).subscribe(s=>{const c=s.filter(d=>d[this.listableService.primaryKeyColumnName]!==i);this.data$.next(c),this.alertService.open(this.listableService.onDeleteMessage,{status:"success"}).subscribe(),this.cdr.markForCheck()})}})}edit(o){this.router.navigate([o[this.listableService.primaryKeyColumnName],"editar"],{relativeTo:this.activatedRoute})}getColumNames(o){return o.filter(i=>"string"==typeof i.key).map(i=>i.key)}}D.\u0275fac=function(o){return new(o||D)(e.\u0275\u0275directiveInject(y.J9),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(a.F0),e.\u0275\u0275directiveInject(a.gz))},D.\u0275cmp=e.\u0275\u0275defineComponent({type:D,selectors:[["app-app-searchable-table"]],inputs:{columns:"columns",listableService:"listableService"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:7,vars:8,consts:[[1,"tui-space_bottom-8",3,"formControl"],[3,"overlay","showLoader"],["class","table","tuiTable","",3,"columns","direction","directionChange",4,"tuiLet"],["tuiTable","",1,"table",3,"columns","direction","directionChange"],["tuiThGroup",""],[4,"ngFor","ngForOf"],["tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],[3,"colSpan"],[1,"tui-space_top-2",3,"items","total","page","pageChange","sizeChange"],["tuiTh","",3,"sorter"],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconDraft","title","Editar","shape","rounded",1,"edit",3,"click"],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconTrash","title","Remove","shape","rounded",1,"remove",3,"click"]],template:function(o,i){1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"tui-input",0),e.\u0275\u0275text(2," Pesquisar "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"tui-loader",1),e.\u0275\u0275pipe(4,"async"),e.\u0275\u0275template(5,z,14,17,"table",2),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("formControl",i.searchControl),e.\u0275\u0275advance(2),e.\u0275\u0275property("overlay",!0)("showLoader",!!e.\u0275\u0275pipeBind1(4,4,i.loading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("tuiLet",e.\u0275\u0275pipeBind1(6,6,i.data$)))},dependencies:[p.ez,p.sg,p.Ov,f.ReactiveFormsModule,f.NgControlStatus,f.FormControlDirective,g.fN,g.v0,t.jz,t.c4,t.jY,t.EE,t.Ws,t.Kt,t.fu,t.Bl,t.DZ,t.LU,M.WD,M.Ls,b.y3,b.WT,T.dS,T.kM,h.Qf,h.K3,h.wU],styles:[".buttons-header[_ngcontent-%COMP%]{padding-block:1.5rem;padding-inline:2rem;border-radius:.5rem;border:1px solid var(--tui-base-03);background-color:var(--tui-base-02)}.table[_ngcontent-%COMP%]{width:100%}"]}),(0,R.gn)([x.UM],D.prototype,"getColumNames",null);var Q=n(1540);let H=(()=>{class r{constructor(i,s,c){this.router=i,this.activatedRoute=s,this.raspberriesService=c,this.columns=[{key:"id",title:"ID"},{key:"short_name",title:"Nome"},{key:"mac_address",title:"Endere\xe7o MAC"},{key:"serial_number",title:"N\xfamero Serial"},{key:"display_id",title:"Ligado no Display"}]}goTo(i){this.router.navigate([i],{relativeTo:this.activatedRoute})}}return r.\u0275fac=function(i){return new(i||r)(e.\u0275\u0275directiveInject(a.F0),e.\u0275\u0275directiveInject(a.gz),e.\u0275\u0275directiveInject(Q.D))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["app-raspberry-list"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:7,vars:2,consts:[[1,"buttons-header","tui-space_vertical-8"],["tuiButton","","icon","tuiIconPlus","size","m",3,"click"],[3,"columns","listableService"]],template:function(i,s){1&i&&(e.\u0275\u0275elementStart(0,"div")(1,"h1"),e.\u0275\u0275text(2,"Raspberries"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",0)(4,"button",1),e.\u0275\u0275listener("click",function(){return s.goTo("criar")}),e.\u0275\u0275text(5,"Criar"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(6,"app-app-searchable-table",2),e.\u0275\u0275elementEnd()),2&i&&(e.\u0275\u0275advance(6),e.\u0275\u0275property("columns",s.columns)("listableService",s.raspberriesService))},dependencies:[p.ez,g.fN,g.v0,t.jz,M.WD,b.y3,T.dS,D],styles:[".buttons-header[_ngcontent-%COMP%]{padding-block:1.5rem;padding-inline:2rem;border-radius:.5rem;border:1px solid var(--tui-base-03);background-color:var(--tui-base-02)}.table[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),r})()},5635:(K,P,n)=>{n.d(P,{K3:()=>I,Qf:()=>B,wU:()=>v});var p=n(2014),t=n(4650),b=n(433),M=n(6477),g=n(5302),T=n(5640),R=n(3442),f=n(295),O=n(8891),x=n(6249),y=n(5411),h=n(8084),C=n(589),E=n(6083),A=n(6895);const L=["*",[["input"]]],$=["*","input"],S=[E.E2,E.yn,{provide:M.KZ,useExisting:(0,t.forwardRef)(()=>I)},{provide:g.M$,useExisting:(0,t.forwardRef)(()=>I)},{provide:O.N1,useExisting:(0,t.forwardRef)(()=>I)}];let I=(()=>{let u=class extends g.M${constructor(a,l){super(a,l),this.icon=null,this.iconAlign="left",this.datalist="",this.open=!1}get nativeFocusableElement(){return this.computedDisabled||!this.textfield?null:this.textfield.nativeFocusableElement}get focused(){return(0,T.zV)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get canOpen(){return this.interactive&&!!this.datalist}onValueChange(a){this.updateValue(a),this.open=!0}onHovered(a){this.updateHovered(a)}onActiveZone(a){this.updateFocused(a)}handleOption(a){this.setNativeValue(String(a)),this.focusInput(),this.updateValue(String(a)),this.open=!1}getFallbackValue(){return""}focusInput(a=!1){this.nativeFocusableElement&&(0,T.NY)(this.nativeFocusableElement,!0,a)}setNativeValue(a){this.nativeFocusableElement&&(this.nativeFocusableElement.value=a)}};return u.\u0275fac=function(a){return new(a||u)(t.\u0275\u0275directiveInject(b.NgControl,10),t.\u0275\u0275directiveInject(t.ChangeDetectorRef))},u.\u0275cmp=t.\u0275\u0275defineComponent({type:u,selectors:[["tui-input"]],contentQueries:function(a,l,_){if(1&a&&t.\u0275\u0275contentQuery(_,x.gX,5,t.TemplateRef),2&a){let m;t.\u0275\u0275queryRefresh(m=t.\u0275\u0275loadQuery())&&(l.datalist=m.first)}},viewQuery:function(a,l){if(1&a&&(t.\u0275\u0275viewQuery(y.o1,5),t.\u0275\u0275viewQuery(h.yc,5)),2&a){let _;t.\u0275\u0275queryRefresh(_=t.\u0275\u0275loadQuery())&&(l.hostedDropdown=_.first),t.\u0275\u0275queryRefresh(_=t.\u0275\u0275loadQuery())&&(l.textfield=_.first)}},inputs:{icon:"icon",iconAlign:"iconAlign"},features:[t.\u0275\u0275ProvidersFeature(S),t.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:$,decls:4,vars:13,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-input__textfield",1,"t-textfield",3,"pseudoFocused","pseudoHovered","invalid","nativeId","readOnly","iconContent","iconAlign","disabled","focusable","value","valueChange","hoveredChange"]],template:function(a,l){1&a&&(t.\u0275\u0275projectionDef(L),t.\u0275\u0275elementStart(0,"tui-hosted-dropdown",0),t.\u0275\u0275listener("openChange",function(m){return l.open=m})("tuiActiveZoneChange",function(m){return l.onActiveZone(m)}),t.\u0275\u0275elementStart(1,"tui-primitive-textfield",1),t.\u0275\u0275listener("valueChange",function(m){return l.onValueChange(m)})("hoveredChange",function(m){return l.onHovered(m)}),t.\u0275\u0275projection(2),t.\u0275\u0275projection(3,1,["ngProjectAs","input",5,["input"]]),t.\u0275\u0275elementEnd()()),2&a&&(t.\u0275\u0275property("canOpen",l.canOpen)("content",l.datalist||"")("open",l.open),t.\u0275\u0275advance(1),t.\u0275\u0275property("pseudoFocused",l.computedFocused)("pseudoHovered",l.computedHovered)("invalid",l.computedInvalid)("nativeId",l.nativeId)("readOnly",l.readOnly)("iconContent",l.icon)("iconAlign",l.iconAlign)("disabled",l.computedDisabled)("focusable",l.computedFocusable)("value",l.value))},dependencies:[f.e,h.yc,h.B1,y.o1],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}"],changeDetection:0}),(0,p.gn)([(0,t.ViewChild)(y.o1)],u.prototype,"hostedDropdown",void 0),(0,p.gn)([(0,t.ViewChild)(h.yc)],u.prototype,"textfield",void 0),(0,p.gn)([(0,t.Input)(),(0,R.TH)()],u.prototype,"icon",void 0),(0,p.gn)([(0,t.Input)(),(0,R.TH)()],u.prototype,"iconAlign",void 0),(0,p.gn)([(0,t.ContentChild)(x.gX,{read:t.TemplateRef})],u.prototype,"datalist",void 0),u=(0,p.gn)([(0,p.fM)(0,(0,t.Optional)()),(0,p.fM)(0,(0,t.Self)()),(0,p.fM)(0,(0,t.Inject)(b.NgControl)),(0,p.fM)(1,(0,t.Inject)(t.ChangeDetectorRef))],u),u})();var F;let v=F=class extends C.dh{onValueChange(e){this.host.onValueChange(e)}};v.\u0275fac=function(){let u;return function(a){return(u||(u=t.\u0275\u0275getInheritedFactory(v)))(a||v)}}(),v.\u0275dir=t.\u0275\u0275defineDirective({type:v,selectors:[["tui-input"]],features:[t.\u0275\u0275ProvidersFeature([{provide:O.S0,useExisting:(0,t.forwardRef)(()=>F)}]),t.\u0275\u0275InheritDefinitionFeature]});let B=(()=>{let u=class{};return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=t.\u0275\u0275defineNgModule({type:u}),u.\u0275inj=t.\u0275\u0275defineInjector({imports:[A.ez,f.A,h.KW,y.jh]}),u})()}}]);