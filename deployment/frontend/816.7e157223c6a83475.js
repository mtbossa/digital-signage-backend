"use strict";(self.webpackChunkparoquia_pio_x_frontend=self.webpackChunkparoquia_pio_x_frontend||[]).push([[816],{6610:(P,u,n)=>{n.d(u,{D:()=>M});var h=n(1135),o=n(5698),c=n(2340),m=n(4650),E=n(529);let M=(()=>{class d{constructor(r){this.http=r,this.medias$=new h.X(null)}fetchIndex(r,v,x,f){return this.http.get(`${c.N.apiUrl}/api/medias`,{params:{page:x,size:f}})}create(r){return this.http.post(`${c.N.apiUrl}/api/medias`,r,{reportProgress:!0,observe:"events"})}show(r){return this.http.get(`${c.N.apiUrl}/api/medias/${r}`).pipe((0,o.q)(1))}update(r,v){return this.http.patch(`${c.N.apiUrl}/api/medias/${r}`,v).pipe((0,o.q)(1))}getMedias(){return this.medias$.asObservable()}remove(r){return this.http.delete(`${c.N.apiUrl}/api/medias/${r}`).pipe((0,o.q)(1))}getMediaOptions(){return this.http.get(`${c.N.apiUrl}/api/medias/options`).pipe((0,o.q)(1))}}return d.\u0275fac=function(r){return new(r||d)(m.\u0275\u0275inject(E.eN))},d.\u0275prov=m.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},6660:(P,u,n)=>{n.r(u),n.d(u,{MediaListComponent:()=>H});var h=n(6895),o=n(1253),c=n(6098),m=n(4335),E=n(22),M=n(1150),d=n(6693),C=n(2079),r=n(1135),v=n(9841),x=n(8372),f=n(3900),g=n(8675),L=n(3099),T=n(4004),O=n(9300),t=n(4650),D=n(5197),b=n(6610);function y(i,s){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"ID"),t.\u0275\u0275elementEnd())}function $(i,s){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Descri\xe7\xe3o"),t.\u0275\u0275elementEnd())}function I(i,s){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Tipo"),t.\u0275\u0275elementEnd())}function S(i,s){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Nome do arquivo"),t.\u0275\u0275elementEnd())}function B(i,s){1&i&&(t.\u0275\u0275elementStart(0,"th",12),t.\u0275\u0275text(1,"Tamanho"),t.\u0275\u0275elementEnd())}function U(i,s){1&i&&t.\u0275\u0275element(0,"th",13),2&i&&t.\u0275\u0275property("sorter",null)}function R(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.id," ")}}function W(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.description," ")}}function K(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.type," ")}}function A(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.filename," ")}}function j(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"td",16),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",e.size_kb," ")}}function z(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"td",16)(1,"button",17),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext().$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.edit(_.id))}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(2,"button",18),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const _=t.\u0275\u0275nextContext().$implicit,l=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(l.remove(_.id))}),t.\u0275\u0275elementEnd()()}}function V(i,s){1&i&&(t.\u0275\u0275elementStart(0,"tr",14),t.\u0275\u0275template(1,R,2,1,"td",15),t.\u0275\u0275template(2,W,2,1,"td",15),t.\u0275\u0275template(3,K,2,1,"td",15),t.\u0275\u0275template(4,A,2,1,"td",15),t.\u0275\u0275template(5,j,2,1,"td",15),t.\u0275\u0275template(6,z,3,0,"td",15),t.\u0275\u0275elementEnd()),2&i&&(t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","id"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","description"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","type"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","filename"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","size_kb"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiCell","actions"))}const N=function(){return[10,25,50,100]};function w(i,s){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"table",4),t.\u0275\u0275listener("tuiSortByChange",function(_){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.sorter$.next(_))})("directionChange",function(_){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.direction$.next(_))}),t.\u0275\u0275pipe(1,"async"),t.\u0275\u0275pipe(2,"async"),t.\u0275\u0275elementStart(3,"thead")(4,"tr",5),t.\u0275\u0275template(5,y,2,0,"th",6),t.\u0275\u0275template(6,$,2,0,"th",6),t.\u0275\u0275template(7,I,2,0,"th",6),t.\u0275\u0275template(8,S,2,0,"th",6),t.\u0275\u0275template(9,B,2,0,"th",6),t.\u0275\u0275template(10,U,1,1,"th",7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(11,"tbody",8),t.\u0275\u0275template(12,V,7,6,"tr",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"tfoot")(14,"tr")(15,"td",10)(16,"tui-table-pagination",11),t.\u0275\u0275listener("pageChange",function(_){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.changePage(_))})("sizeChange",function(_){t.\u0275\u0275restoreView(e);const l=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(l.changeSize(_))}),t.\u0275\u0275pipe(17,"async"),t.\u0275\u0275elementEnd()()()()()}if(2&i){const e=s.tuiLet,a=t.\u0275\u0275nextContext();t.\u0275\u0275property("columns",a.columns)("direction",t.\u0275\u0275pipeBind1(1,14,a.direction$)||1)("tuiSortBy",t.\u0275\u0275pipeBind1(2,16,a.sorter$)),t.\u0275\u0275advance(5),t.\u0275\u0275property("tuiHead","id"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","description"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","type"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","filename"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","size_kb"),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiHead","actions"),t.\u0275\u0275advance(1),t.\u0275\u0275property("data",e),t.\u0275\u0275advance(1),t.\u0275\u0275property("tuiRowOf",e),t.\u0275\u0275advance(3),t.\u0275\u0275property("colSpan",a.columns.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("items",t.\u0275\u0275pureFunction0(20,N))("total",t.\u0275\u0275pipeBind1(17,18,a.total$)||0)}}let H=(()=>{class i{constructor(e,a,_,l,F){this.alertService=e,this.cdr=a,this.router=_,this.activatedRoute=l,this.mediasService=F,this.columns=["id","description","type","filename","size_kb","actions"],this.medias=[],this.page$=new r.X(1),this.size$=new r.X(10),this.refresh$=new r.X(!1),this.direction$=new r.X(-1),this.sorter$=new r.X("id"),this.search="",this.request$=(0,v.a)([this.sorter$,this.direction$,this.page$,this.size$,this.refresh$]).pipe((0,x.b)(0),(0,f.w)(([p,X,k,J])=>this.mediasService.fetchIndex(p,X,k,J).pipe((0,g.O)(null))),(0,L.B)()),this.loading$=this.request$.pipe((0,T.U)(p=>!p)),this.total$=this.request$.pipe((0,O.h)(m.Pc),(0,T.U)(({total:p})=>p),(0,g.O)(1)),this.data$=this.request$.pipe((0,O.h)(m.Pc),(0,T.U)(p=>p.data.filter(m.Pc)),(0,g.O)([])),this.subscriptions=[]}ngOnInit(){const e=this.data$.subscribe(a=>this.medias=a);this.subscriptions=[e,...this.subscriptions]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}changePage(e){this.page$.next(e+1)}changeSize(e){this.size$.next(e)}refresh(){this.refresh$.next(!0)}goTo(e){this.router.navigate([e],{relativeTo:this.activatedRoute})}remove(e){this.mediasService.remove(e).subscribe({next:()=>{this.medias=this.medias.filter(a=>a.id!==e),this.alertService.open("M\xeddia removida com sucesso!",{status:"success"}).subscribe(),this.cdr.markForCheck()}})}edit(e){this.router.navigate([e,"editar"],{relativeTo:this.activatedRoute})}}return i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275directiveInject(M.J9),t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(D.F0),t.\u0275\u0275directiveInject(D.gz),t.\u0275\u0275directiveInject(b.D))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-media-list"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:10,vars:5,consts:[[1,"buttons-header","tui-space_vertical-8"],["tuiButton","","icon","tuiIconPlus","size","m",3,"click"],[3,"overlay","showLoader"],["class","table","tuiTable","",3,"columns","direction","tuiSortBy","tuiSortByChange","directionChange",4,"tuiLet"],["tuiTable","",1,"table",3,"columns","direction","tuiSortBy","tuiSortByChange","directionChange"],["tuiThGroup",""],["tuiTh","","tuiSortable","",4,"tuiHead"],["tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"tuiRow","tuiRowOf"],[3,"colSpan"],[1,"tui-space_top-2",3,"items","total","pageChange","sizeChange"],["tuiTh","","tuiSortable",""],["tuiTh","",3,"sorter"],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd",""],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconDraft","title","Editar","shape","rounded",1,"edit",3,"click"],["tuiIconButton","","appearance","flat","size","s","icon","tuiIconTrash","title","Remove","shape","rounded",1,"remove",3,"click"]],template:function(e,a){1&e&&(t.\u0275\u0275elementStart(0,"div")(1,"h1"),t.\u0275\u0275text(2,"M\xeddias"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",0)(4,"button",1),t.\u0275\u0275listener("click",function(){return a.goTo("criar")}),t.\u0275\u0275text(5,"Criar"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(6,"div")(7,"tui-loader",2),t.\u0275\u0275pipe(8,"async"),t.\u0275\u0275template(9,w,18,21,"table",3),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(7),t.\u0275\u0275property("overlay",!0)("showLoader",!!t.\u0275\u0275pipeBind1(8,3,a.loading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("tuiLet",a.medias))},dependencies:[h.ez,h.Ov,d.fN,d.v0,o.jz,o.c4,o.jY,o.EE,o.Ws,o.Kt,o.fu,o.Bl,o.DZ,o.LU,o.PQ,o.gJ,E.WD,E.Ls,c.y3,c.WT,C.dS,C.kM],styles:[".buttons-header[_ngcontent-%COMP%]{padding-block:1.5rem;padding-inline:2rem;border-radius:.5rem;border:1px solid var(--tui-base-03);background-color:var(--tui-base-02)}.table[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),i})()}}]);